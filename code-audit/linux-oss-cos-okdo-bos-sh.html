<h1 id="title">
    Linux 备份到阿里云OSS、腾讯云COS、七牛云KODO、百度云盘BOS 云存储脚本工具
</h1>
<time id="date" datetime="2017-11-07T20:50:53+08:00">2017-11-07 20:50</time>
<section id="content">
    <p>
        这是一个开源的linux下备份网站的脚本，可选将备份上传到百度云盘BOS对象存储、七牛云KODO存储或者腾讯云COS存储或者阿里云OSS存储。
    </p>
    <p>
        <a href="https://laod.cn/wp-content/uploads/2017/11/Linux.jpg"
            ><noscript
                ><img
                    class="alignnone size-full wp-image-4262"
                    src="https://laod.cn/wp-content/uploads/2017/11/Linux.jpg"
                    alt="Linux"
                    width="316"
                    height="197" /></noscript
            ><img
                class="alignnone size-full wp-image-4262 j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20316%20197'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2017/11/Linux.jpg"
                alt="Linux"
                width="316"
                height="197"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone size-full wp-image-4262 j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2017/11/Linux.jpg"
                    alt="Linux"
                    width="316"
                    height="197" /></noscript
        ></a>
    </p>
    <p>简单介绍下各种云存储</p>
    <h4>阿里云对象存储 OSS</h4>
    <p>
        海量、安全、低成本、高可靠的云存储服务，提供99.99999999%的数据可靠性。使用RESTful
        API
        可以在互联网任何位置存储和访问，容量和处理能力弹性扩展，多种存储类型供选择全面优化存储成本。
    </p>
    <p>&nbsp;</p>
    <h4>腾讯云对象存储COS</h4>
    <p>
        对象存储（Cloud Object
        Storage）是面向企业和个人开发者提供的高可用，高稳定，强安全的云端存储服务。您可以将任意数量和形式的非结构化数据放入COS，并在其中实现数据的管理和处理。COS支持标准的Restful
        API接口，您可以快速上手使用，按实际使用量计费，无最低使用限制。
    </p>
    <p>&nbsp;</p>
    <h4>七牛云对象存储</h4>
    <p>
        七牛云海量存储系统 (KODO)
        为完全自主研发并拥有核心技术，经过五年时间的大规模客户验证已占据行业绝对领先地位，可广泛应用于海量数据管理的场景。
    </p>
    <p>&nbsp;</p>
    <h4>百度云对象存储BOS</h4>
    <p>
        Baidu Object Storage<br />提供稳定、安全、高效、高可扩展的云存储服务。您可以将任意数量和形式的非结构化数据存入BOS，并对数据进行管理和处理。BOS支持标准、低频、冷存储等多种存储类型，满足您各类场景的存储需求。
    </p>
    <fieldset>
        <legend>下载地址：</legend>
        <p>wget http://update.itxueguan.com/itxg.sh</p>
    </fieldset>
    <blockquote>
        <p>更新日志：</p>
        <p>更新日期：20170512更新版本：0.1更新内容：初始化版本</p>
        <p>更新日期：20170513更新版本：0.2更新内容：数据库备份</p>
        <p>
            更新日期：20170517更新版本：0.3更新内容：增加更新检测及配置文件分离
        </p>
        <p>更新日期：20170519更新版本：0.4更新内容：增加备份到阿里云</p>
        <p>
            更新时间：20170527更新版本：0.4.2更新内容：增加判断本地磁盘空间是否满足备份需求及自定义腾讯云备份保存周期
        </p>
        <p>
            更新时间：20170528更新版本：0.4.3更新内容：增加备份到百度云盘（速度跟网络带宽有关）
        </p>
        <p>
            更新时间：20170701更新版本：0.4.4更新内容：增加网站服务状态检测，增加判断条件更智能
        </p>
        <p>
            更新时间：20170722更新版本：0.4.5更新内容：加支持阿里云经典网络及专有网络备份，修复已知BUG。
        </p>
        <p>
            更新时间：20170722更新版本：0.4.6更新内容：增加阿里云自动以保存周期，删除周期外文件
        </p>
    </blockquote>
    <p><strong>第一步、定时执行</strong></p>
    <p>#crontab -e</p>
    <p>55 23 * * * /root/itxg.sh</p>
    <p>
        #每天23点55分执行/root/itxg.sh这个脚本。时间及脚本放置路径按照自己实际情况修改
    </p>
    <p><strong>第二步、第一次执行itxg.sh脚本</strong></p>
    <p>第一次，执行itxg.sh将在当前目录下生成,itxg.conf配置文件。</p>
    <p><strong>第三步、编辑itxg.conf配置文件</strong></p>
    <p>修改“itxg.conf”&nbsp;，此文件跟itxg.sh默认在同一路径内</p>
    <div class="dp-highlighter">
        <div class="bar"></div>
        <ol class="dp-py" start="1">
            <li class="alt">
                <span class="comment"
                    >###################################################数据库</span
                >
            </li>
            <li class=""><span class="comment">#数据库用户名</span></li>
            <li class="alt">DB_USER=</li>
            <li class=""><span class="comment">#数据库密码</span></li>
            <li class="alt">DB_PASS=</li>
            <li class=""><span class="comment">#数据库连接地址</span></li>
            <li class="alt">DB_HOST=localhost</li>
            <li class=""><span class="comment">#数据库名称</span></li>
            <li class="alt">DB_NAME=</li>
            <li class="">
                <span class="comment"
                    >####################################################公共配置</span
                >
            </li>
            <li class="alt">
                <span class="comment"
                    >#tengxun为开启备份到腾讯,qiniu为备份到七牛</span
                >
            </li>
            <li class="">enable=qiniu</li>
            <li class="alt">
                <span class="comment">#开启数据库备份yes,no</span>
            </li>
            <li class="">db_enable=yes</li>
            <li class="alt">
                <span class="comment"
                    >#需要备份的网站目录/data/itxg不需要/结尾</span
                >
            </li>
            <li class="">backup_file=/data/itxg</li>
            <li class="alt">
                <span class="comment"
                    >####################################################腾讯配置开始</span
                >
            </li>
            <li class=""><span class="comment">#你的域名</span></li>
            <li class="alt">domain=laod.cn</li>
            <li class=""><span class="comment">#你的bucket名称</span></li>
            <li class="alt">txbucket=</li>
            <li class=""><span class="comment">#你的appid</span></li>
            <li class="alt">appid=</li>
            <li class=""><span class="comment">#你的证书ID</span></li>
            <li class="alt">renzhengid=</li>
            <li class=""><span class="comment">#你的证书key</span></li>
            <li class="alt">renzhengmiyao=</li>
            <li class="">
                <span class="comment"
                    >####################################################七牛配置开始</span
                >
            </li>
            <li class="alt"><span class="comment">#你的证书ID</span></li>
            <li class="">access_key=</li>
            <li class="alt"><span class="comment">#你的证书key</span></li>
            <li class="">secret_key=</li>
            <li class="alt"><span class="comment">#你的bucket名称</span></li>
            <li class="">qiniubucket=</li>
            <li class="alt"></li>
            <li class="">
                <span class="comment"
                    >################################################阿里配置开始</span
                >
            </li>
            <li class="alt">aliurl=oss-cn-shenzhen-internal.aliyuncs.com</li>
            <li class="">aliid=LT</li>
            <li class="alt">alikey=acDzz0</li>
            <li class="">alibucket=it</li>
            <li class="alt">
                <span class="comment"
                    >#####################################################配置结束</span
                >
            </li>
        </ol>
    </div>
    <p><strong>备注：</strong></p>
    <p>如果你enable=tengxun，七牛配置将不用设置</p>
    <p>如果你enable=qiniu， &nbsp; &nbsp; &nbsp;腾讯配置将不用设置</p>
    <p>如果你enable=aliyun，七牛和腾讯配置将不用设置</p>
    <p>如果你db_enable=no， 数据库配置将不用设置</p>
    <blockquote>
        <p><strong>更新</strong></p>
        <p>执行命令：sh itxg.sh update</p>
    </blockquote>
    <p><strong>备注：</strong></p>
    <p>
        如果您将脚本改名后，例如:改itxg.sh为xgit.sh，那么执行升级的命令为:sh
        xgit.sh update
    </p>
    <p>&nbsp;</p>
    <p><strong>常见问题：</strong></p>
    <p>
        数据库开启备份后：”Warning: Using a password on the command line
        interface can be insecure.”为正常现象。
    </p>
    <div class="entry-copyright">
        <p>
            原创文章，作者：老D，如若转载，请注明出处：https://laod.cn/code-audit/linux-oss-cos-okdo-bos-sh.html
        </p>
    </div>
</section>
