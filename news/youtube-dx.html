<h1 id="title">谷歌网络服务宕机，中国电信背锅</h1>
<time id="date" datetime="2018-11-17T13:11:01+08:00">2018-11-17 13:11</time>
<section id="content">
    <p>
        上周日，谷歌旗下的云服务、YouTube等网络服务在全球范围内均发生了数小时的宕机，外媒称因遭到来自中国电信IP的BGP劫持导致故障发生。虽然这次事件为中国电信带来了“宝贵”的谷歌流量，但是黑锅我们真的不背。
    </p>
    <p>
        <a href="https://laod.cn/wp-content/uploads/2018/11/e1.png"
            ><noscript
                ><img
                    class="alignnone size-full wp-image-5516"
                    src="https://laod.cn/wp-content/uploads/2018/11/e1.png"
                    alt="谷歌宕机"
                    width="1058"
                    height="850" /></noscript
            ><img
                class="alignnone size-full wp-image-5516 j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201058%20850'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2018/11/e1.png"
                alt="谷歌宕机"
                width="1058"
                height="850"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone size-full wp-image-5516 j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2018/11/e1.png"
                    alt="谷歌宕机"
                    width="1058"
                    height="850" /></noscript
        ></a>
    </p>
    <h2>概述</h2>
    <p>
        本次事件是由一家名为Main One的西非电信公司进行网络更新引发的。Main
        One是位于尼日利亚拉各斯的一家商业ISP供应商，在葡萄牙和南非之间运营着一条海底电缆。
    </p>
    <p>该公司表示：</p>
    <blockquote>
        <p>
            由于更新时采用了错误配置，导致Google的流量被重定向至中国电信，持续时间长达74分钟。在这期间，全球范围内的用户再尝试连接Google、YouTube、Spotify和Nest等网络服务时，流量会通过一个名为TransTelekom的俄罗斯ISP供应商重定向至中国电信，中国电信无法解析这些莫名其妙的流量和请求，因此导致宕机事件。
        </p>
    </blockquote>
    <h2>解构</h2>
    <p>
        Main
        One提供了一些具体的细节。他们在进行网络更新时，由于误操作导致BGP过滤器配置错误，将一部分原来只属于某个网段的线路配置加入了另一个网段中，致其骨干网将针对Google服务的请求经过层层节点全部定向至中国电信IP。
    </p>
    <h3>为什么一家西非ISP供应商的失误会影响到北半球的美国？</h3>
    <p>
        主要原因是Main
        One通过位于尼日利亚拉哥斯的IXPN公司与谷歌存建立了点对点流量共享和交换协议，当Main
        One导入了错误的配置信息时，相关路由信息也会被谷歌自动获取和投入使用，谷歌的全网流量会通过TransTelecom传输到NTT和其他中转ISP，最后被重定向至中国电信。本次事件主要发生在商业级ISP链路上，消费级ISP链路几乎不受影响。谷歌也表示没有任何服务器或数据受到影响。
    </p>
    <h2>后话</h2>
    <p>
        这一事件进一步凸显了互联网架构的一个基础性弱点。BGP的设计初衷是为正常的商业ISP供应商和其他实体之间构建可以信任的网络链路，降低鉴别和过滤信息的复杂程度。而当今互联网服务提供商和国家之间的商业和地缘政治关系将BGP的薄弱点暴露了出来。虽然存在ROA等验证方法，但很少有ISP全面部署。
    </p>
    <p>
        即使像谷歌这样拥有大量资源的公司也无法免受这种BGP故障的影响，大多数没有Google这么雄厚资源的企业可能无法快速定位和解决问题。
    </p>
    <div class="entry-copyright">
        <p>
            原创文章，作者：老D，如若转载，请注明出处：https://laod.cn/news/youtube-dx.html
        </p>
    </div>
</section>
