<h1 id="title">PHP 7.4.0 正式发布 以及新特性</h1>
<time id="date" datetime="2019-11-30T12:05:04+08:00">2019-11-30 12:05</time>
<section id="content">
    <p>PHP 7.4.0发布了，此版本标志着PHP 7系列的第四次特性更新。</p>
    <p>PHP 7.4.0进行了许多改进，并带来了一些新特性。</p>
    <figure
        id="attachment_6649"
        aria-describedby="caption-attachment-6649"
        style="width: 750px"
        class="wp-caption alignnone"
    >
        <a href="https://laod.cn/wp-content/uploads/2019/11/PHP.jpg"
            ><noscript
                ><img
                    class="size-full wp-image-6649"
                    src="https://laod.cn/wp-content/uploads/2019/11/PHP.jpg"
                    alt="PHP"
                    width="750"
                    height="300" /></noscript
            ><img
                class="size-full wp-image-6649 j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20750%20300'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2019/11/PHP.jpg"
                alt="PHP"
                width="750"
                height="300"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="size-full wp-image-6649 j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2019/11/PHP.jpg"
                    alt="PHP"
                    width="750"
                    height="300" /></noscript
        ></a>
        <figcaption id="caption-attachment-6649" class="wp-caption-text">
            PHP
        </figcaption>
    </figure>
    <p>包括：</p>
    <p><strong>Typed Properties类型属性</strong></p>
    <p>
        类属性现在支持类型声明，以下示例将强制$User-&gt;
        id只能分配int值，而$User-&gt; name只能分配string值。
    </p>
    <pre>
&lt;?php
class User {
public int $id;
public string $name;
}
?&gt;</pre
    >
    <p><strong>Arrow Functions&nbsp;箭头函数</strong></p>
    <p>箭头函数提供了用于定义具有隐式按值作用域绑定的函数的简写语法。</p>
    <pre>
&lt;?php
$factor = 10;
$nums = array_map(fn($n) =&gt; $n * $factor, [1, 2, 3, 4]);
// $nums = array(10, 20, 30, 40);
?&gt;</pre
    >
    <p>将闭包传递给array_map或array_filter等函数时，它可以发挥极大的作用。</p>
    <pre>
// A collection of Post objects $posts = [];
$ids = array_map(fn($post) =&gt; $post-&gt;id, $posts);</pre
    >
    <p>
        <strong
            >Limited Return Type Covariance and Argument Type
            Contravariance&nbsp;&nbsp;有限返回类型协变与参数类型逆变</strong
        >
    </p>
    <p>
        仅当使用自动加载时，才提供完全协变/逆变支持。在单个文件中，只能使用非循环类型引用，因为所有类在被引用之前都必须可用。
    </p>
    <pre>
&lt;?php
class A {}
class B extends A {}
class Producer {
public function method(): A {}
}
class ChildProducer extends Producer {
public function method(): B {}
}
?&gt;</pre
    >
    <p><strong>Unpacking Inside Arrays&nbsp;打包内部数组</strong></p>
    <pre>
&lt;?php
$parts = ['apple', 'pear'];
$fruits = ['banana', 'orange', ...$parts, 'watermelon'];
// ['banana', 'orange', 'apple', 'pear', 'watermelon'];
?&gt;</pre
    >
    <p><strong>Numeric Literal Separator&nbsp;&nbsp;数值文字分隔符</strong></p>
    <p>数字文字可以在数字之间包含下划线。</p>
    <pre>
&lt;?php
6.674_083e-11; // float
299_792_458; // decimal
0xCAFE_F00D; // hexadecimal
0b0101_1111; // binary
?&gt;</pre
    >
    <p><strong>Weak References&nbsp;弱引用</strong></p>
    <p>弱引用使程序员可以保留对对象的引用，不会阻止对象被销毁。</p>
    <p>
        <strong
            >Allow Exceptions from
            __toString()&nbsp;允许从__toString()抛出异常</strong
        >
    </p>
    <p>
        现在允许从__toString()引发异常，以往这会导致致命错误，字符串转换中现有的可恢复致命错误已转换为&nbsp;Error&nbsp;异常。
    </p>
    <p><strong>Opcache Preloading&nbsp;&nbsp;Opcache预加载</strong></p>
    <p>新增Opcache预加载支持。</p>
    <p>此外还有一些弃用，以及从核心中删除一些扩展。</p>
    <div class="entry-copyright">
        <p>
            原创文章，作者：老D，如若转载，请注明出处：https://laod.cn/news/php-7-4-0.html
        </p>
    </div>
</section>
