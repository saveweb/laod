<h1 id="title">折腾了几天，大致升级OK了</h1>
<time id="date" datetime="2017-10-17T02:51:51+08:00">2017-10-17 02:51</time>
<section id="content">
    <p>前几天就开始升级服务器内核、PHP版本、主题了，但是无bug不在呀。</p>
    <p>
        问题一个接着一个，首先是用户无法通过注册邮件找回密码、无法使用邀请码注册（点击提交会直接500错误，空白页面），不用邀请码可以正常注册…
    </p>
    <p>然后就一个个的排除，什么插件、主题、SMTP都试过了，不行！</p>
    <p>接着一个个备份回档，然后再一个个的升级、降级….</p>
    <p>
        最后发现是PHP的问题，从PHP7.1.10一直降级到7.0.24才可以，这个都怪我自己看经常的留意php的升级哪些功能，以前一直用5.5版本，很老很经典很稳定的版本，但是速度不如PHP7+的。
    </p>
    <p>
        目前已经可以使用邀请码注册了，现在2017-10-17 02：45 已经放出一批邀请码。
    </p>
    <p>
        通过邮件找回密码功能也OK了，只要你输入你帐号正确的邮件地址，系统会自动给你发一封密码重设邮件。（点击获取新密码
        并不会提示邮件已发送 0.0 这个是什么问题？速度太快了？）
    </p>
    <p>&nbsp;</p>
    <p>
        <a href="https://laod.cn/wp-content/uploads/2017/10/q2.gif"
            ><noscript
                ><img
                    class="alignnone size-full wp-image-4082"
                    src="https://laod.cn/wp-content/uploads/2017/10/q2.gif"
                    alt="折腾了几天，大致升级OK了"
                    width="200"
                    height="200" /></noscript
            ><img
                class="alignnone size-full wp-image-4082 j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20200%20200'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2017/10/q2.gif"
                alt="折腾了几天，大致升级OK了"
                width="200"
                height="200"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone size-full wp-image-4082 j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2017/10/q2.gif"
                    alt="折腾了几天，大致升级OK了"
                    width="200"
                    height="200" /></noscript
        ></a>
    </p>
    <p>
        <a href="https://laod.cn/wp-content/uploads/2017/10/q1.gif"
            ><noscript
                ><img
                    class="alignnone size-full wp-image-4081"
                    src="https://laod.cn/wp-content/uploads/2017/10/q1.gif"
                    alt="折腾了几天，大致升级OK了"
                    width="221"
                    height="341" /></noscript
            ><img
                class="alignnone size-full wp-image-4081 j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20221%20341'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2017/10/q1.gif"
                alt="折腾了几天，大致升级OK了"
                width="221"
                height="341"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone size-full wp-image-4081 j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2017/10/q1.gif"
                    alt="折腾了几天，大致升级OK了"
                    width="221"
                    height="341" /></noscript
        ></a>
    </p>
    <p>
        <a href="https://laod.cn/wp-content/uploads/2017/10/q3.png"
            ><noscript
                ><img
                    class="alignnone size-full wp-image-4084"
                    src="https://laod.cn/wp-content/uploads/2017/10/q3.png"
                    alt="折腾了几天，大致升级OK了"
                    width="440"
                    height="293" /></noscript
            ><img
                class="alignnone size-full wp-image-4084 j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20440%20293'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2017/10/q3.png"
                alt="折腾了几天，大致升级OK了"
                width="440"
                height="293"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone size-full wp-image-4084 j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2017/10/q3.png"
                    alt="折腾了几天，大致升级OK了"
                    width="440"
                    height="293" /></noscript
        ></a>
    </p>
    <p style="text-align: center">但愿永无BUG，永不宕机。</p>
    <p>&nbsp;</p>
    <p><strong>一些建议：</strong></p>
    <p>升级前必须备份！备份！！备份！！！重要的事情说三遍。</p>
    <p>注意你的程序、插件、主题是否支持你想升级的新版本。</p>
    <p>&nbsp;</p>
    <p>这几天，来来回回的升级、测试、回档 丢失了两篇文章、N多留言评论….</p>
    <p>最后，果然您看到老D博客有bug的请留言告知，谢谢！</p>
    <blockquote>
        <p>
            <span style="font-size: 10pt"
                >已知的bug，就是用户头像的问题，这个腾讯云的一个大坑，需要我慢慢填</span
            >
        </p>
        <p>
            <span style="font-size: 10pt"
                >这个需要我自己手动同步，腾讯云储存在业界我用过的最垃圾的，没有之一！</span
            >
        </p>
    </blockquote>
    <p>&nbsp;</p>
    <hr />
    <p>&nbsp;</p>
    <p>
        <span style="color: #ff0000"><strong>2017-10-24更新：</strong></span>
    </p>
    <p>
        因为最近发现有大面积的502报错（502 Bad
        Gateway）调大了服务器php-fpm的很多值，又观察了几天，要弄了502重启脚本，还是不行…
    </p>
    <p>最后把Nginx换成Tengine就发现502不见了</p>
    <p>还有就是现在已经去掉了前几天添加的一些特效</p>
    <div class="entry-copyright">
        <p>
            原创文章，作者：老D，如若转载，请注明出处：https://laod.cn/journal/shengji-ok.html
        </p>
    </div>
</section>
