<h1 id="title">Git客户端命令执行漏洞(CVE-2014-9390)</h1>
<time id="date" datetime="2014-12-19T21:38:35+08:00">2014-12-19 21:38</time>
<section id="content">
    <p>
        今日Github官方发布安全公告称：修复了git客户端里的一个高危安全漏洞(CVE-2014-9390)
        影响包括windows及Mac等系统下的所有git客户端
    </p>
    <p>
        详见：<a
            title=""
            href="https://github.com/blog/1938-git-client-vulnerability-announced"
            target="_blank"
            data-original-title=""
            >https://github.com/blog/1938-git-client-vulnerability-announced</a
        >
    </p>
    <blockquote>
        <p>
            The vulnerability concerns Git and Git-compatible clients that
            access Git repositories in a case-insensitive or case-normalizing
            filesystem. An attacker can craft a malicious Git tree that will
            cause Git to overwrite its own .git/config file when cloning or
            checking out a repository, leading to arbitrary command execution in
            the client machine. Git clients running on OS X (HFS+) or any
            version of Microsoft Windows (NTFS, FAT) are exploitable through
            this vulnerability. Linux clients are not affected if they run in a
            case-sensitive filesystem.
        </p>
    </blockquote>
    <p>
        测试方法：<code
            >git clone
            http://gitcasefail.googlecode.com/svn/trunk/repo/&nbsp;</code
        >弹计算器说明漏洞存在
    </p>
    <figure
        id="attachment_319"
        aria-describedby="caption-attachment-319"
        style="width: 749px"
        class="wp-caption alignnone"
    >
        <a
            href="https://laod.cn/wp-content/uploads/2014/12/git_rce.png"
            rel="https://laod.cn"
            ><noscript
                ><img
                    class="wp-image-319 size-full"
                    title="git客户端漏洞"
                    src="https://laod.cn/wp-content/uploads/2014/12/git_rce.png"
                    alt="git客户端漏洞"
                    width="749"
                    height="616" /></noscript
            ><img
                class="wp-image-319 size-full j-lazy"
                title="git客户端漏洞"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20749%20616'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2014/12/git_rce.png"
                alt="git客户端漏洞"
                width="749"
                height="616"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="wp-image-319 size-full j-lazy"
                    title="git客户端漏洞"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2014/12/git_rce.png"
                    alt="git客户端漏洞"
                    width="749"
                    height="616" /></noscript
        ></a>
        <figcaption id="caption-attachment-319" class="wp-caption-text">
            git客户端漏洞
        </figcaption>
    </figure>
    <blockquote>
        <p>
            <a
                class="__yjs_email__"
                href="/cdn-cgi/l/email-protection"
                data-yjsemail="9ab5b5daf2fff3fdff"
                >[email&nbsp;protected]</a
            >
            <script data-yjshash="f9e31" type="text/javascript">
                /* <![CDATA[ */ !(function (t, e, r, n, c, a, p) {
                    try {
                        t =
                            document.currentScript ||
                            (function () {
                                for (
                                    t = document.getElementsByTagName("script"),
                                        e = t.length;
                                    e--;

                                )
                                    if (t[e].getAttribute("data-yjshash"))
                                        return t[e];
                            })();
                        if (t && (c = t.previousSibling)) {
                            p = t.parentNode;
                            if ((a = c.getAttribute("data-yjsemail"))) {
                                for (
                                    e = "",
                                        r = ("0x" + a.substr(0, 2)) | 0,
                                        n = 2;
                                    a.length - n;
                                    n += 2
                                )
                                    e +=
                                        "%" +
                                        (
                                            "0" +
                                            (
                                                ("0x" + a.substr(n, 2)) ^
                                                r
                                            ).toString(16)
                                        ).slice(-2);
                                p.replaceChild(
                                    document.createTextNode(
                                        decodeURIComponent(e)
                                    ),
                                    c
                                );
                            }
                            p.removeChild(t);
                        }
                    } catch (u) {}
                })(); /* ]]> */
            </script>
            <br />Mac升级方法：brew install git 然后<br />cd /usr/bin<br />sudo
            mkdir old-git<br />sudo mv git* old-git<br />然后运行git
            –version查看版本 升级ok
        </p>
    </blockquote>
    <p>
        <a
            title=""
            href="http://article.gmane.org/gmane.linux.kernel/1853266"
            target="_blank"
            data-original-title=""
            >http://article.gmane.org/gmane.linux.kernel/1853266</a
        >
    </p>
    <blockquote>
        <p>
            This is a security-fix for CVE-2014-9390, which affects users on
            Windows and Mac OS X but not typical UNIX users.<br />A set of new
            releases for older maintenance tracks (v1.8.5.6, v1.9.5, v2.0.5, and
            v2.1.4) are published at the same time and they contain the same
            fix.<br />Various implementations and ports, including Git for
            Windows, Git OSX installer, JGit &amp; EGit, libgit2 (and Visual
            Studio which uses it)have been updated at the same time.
        </p>
        <p>
            Even though the issue may not affect Linux users, if you are a
            hosting service whose users may fetch from your service to Windows
            or Mac OS X machines, you are strongly encouraged to update to
            protect such users who use existing versions of Git.
        </p>
    </blockquote>
    <p>
        玄机在这里：http://gitcasefail.googlecode.com/svn/trunk/<span
            style="color: #ff0000"
            >.Git</span
        >/hooks/post-checkout
    </p>
    <pre class="lang:default decode:true">
calc.exe
calc
open /Applications/Calculator.app/
gnome-calculator</pre
    >
    <p>&nbsp;</p>
    <blockquote>
        <p>
            * We used to allow committing a path “.Git/config” with Git that
            is<br />running on a case sensitive filesystem, but an attempt to
            check out<br />such a path with Git that runs on a case insensitive
            filesystem<br />would have clobbered “.git/config“, which is
            definitely not what<br />the user would have expected. Git now
            prevents you from tracking<br />a path with “.Git” (in any case
            combination) as a path component.
        </p>
        <p>
            * On Windows, certain path components that are different from
            “.git”<br />are mapped to “.git”, e.g. “git~1/config” is treated as
            if it were<br />“.git/config”. HFS+ has a similar issue, where
            certain unicode<br />codepoints are ignored, e.g.
            “.g\u200cit/config” is treated as if<br />it were “.git/config“.
            Pathnames with these potential issues are<br />rejected on the
            affected systems. Git on systems that are not<br />affected by this
            issue (e.g. Linux) can also be configured to<br />reject them to
            ensure cross platform interoperability of the hosted<br />projects.
        </p>
        <p>
            * “git fsck” notices a tree object that records such a path that
            can<br />be confused with “.git”, and with receive.fsckObjects
            configuration<br />set to true, an attempt to “git push” such a tree
            object will be<br />rejected. Such a path may not be a problem on
            some filesystems<br />but in order to protect those on HFS+ and on
            case insensitive<br />filesystems, this check is enabled on all
            platforms.
        </p>
    </blockquote>
    <p>
        参考来源：Scanv &amp;&nbsp;<a
            title=""
            href="http://article.gmane.org/gmane.linux.kernel/1853266"
            target="_blank"
            data-original-title=""
            >gmane</a
        >
    </p>
    <p>&nbsp;</p>
    <div class="entry-copyright">
        <p>
            原创文章，作者：老D，如若转载，请注明出处：https://laod.cn/security/git-execution-vulnerability.html
        </p>
    </div>
</section>
