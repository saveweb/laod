<h1 id="title">Linux TCP “SACK PANIC” 远程拒绝服务漏洞修复</h1>
<time id="date" datetime="2019-06-21T21:54:02+08:00">2019-06-21 21:54</time>
<section id="content">
    <p>
        最近两天网上曝出：<span style="color: #ff0000"
            ><strong
                >Linux 内核被曝存在TCP “SACK PANIC”
                远程拒绝服务漏洞（漏洞编号：CVE-2019-11477,CVE-2019-11478,CVE-2019-11479）</strong
            ></span
        >，攻击者可利用该漏洞远程攻击目标服务器，导致系统崩溃或无法提供服务。
    </p>
    <p>
        <a href="https://laod.cn/wp-content/uploads/2019/06/l0.jpg"
            ><noscript
                ><img
                    class="size-full wp-image-6150 aligncenter"
                    src="https://laod.cn/wp-content/uploads/2019/06/l0.jpg"
                    alt="Linux TCP"
                    width="600"
                    height="342" /></noscript
            ><img
                class="size-full wp-image-6150 aligncenter j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20600%20342'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2019/06/l0.jpg"
                alt="Linux TCP"
                width="600"
                height="342"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="size-full wp-image-6150 aligncenter j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2019/06/l0.jpg"
                    alt="Linux TCP"
                    width="600"
                    height="342" /></noscript
        ></a>
    </p>
    <h4>漏洞详情：</h4>
    <p>
        近日，腾讯云安全中心情报平台监测到&nbsp;Netflix&nbsp;信息安全团队研究员Jonathan&nbsp;Looney发现&nbsp;Linux&nbsp;以及&nbsp;FreeBSD&nbsp;等系统内核上存在严重远程DoS漏洞，攻击者可利用该漏洞构造并发送特定的&nbsp;SACK&nbsp;序列请求到目标服务器导致服务器崩溃或拒绝服务。
    </p>
    <p><strong>风险等级：</strong><span style="color: #ff0000">高风险</span></p>
    <h4>漏洞风险：</h4>
    <p>
        远程发送特殊构造的攻击包，导致目标 Linux 或 FreeBSD
        服务器崩溃或服务不可用。
    </p>
    <h4>影响版本</h4>
    <p><strong>目前已知受影响版本如下：</strong></p>
    <ol>
        <li>FreeBSD 12（使用到 RACK TCP 协议栈）</li>
        <li>CentOS 5（Redhat 官方已停止支持，不再提供补丁）</li>
        <li>CentOS 6</li>
        <li>CentOS 7</li>
        <li>Ubuntu 18.04 LTS</li>
        <li>Ubuntu 16.04 LTS</li>
        <li>Ubuntu 19.04</li>
        <li>Ubuntu 18.10</li>
    </ol>
    <p>&nbsp;</p>
    <h4>安全版本：</h4>
    <p>
        <strong
            >各大Linux发行厂商已发布内核修复补丁，详细内核修复版本如下：</strong
        >
    </p>
    <ol>
        <li>CentOS 6 ：2.6.32-754.15.3</li>
        <li>CentOS 7 ：3.10.0-957.21.3</li>
        <li>Ubuntu 18.04 LTS：4.15.0-52.56</li>
        <li>Ubuntu 16.04 LTS：4.4.0-151.178</li>
        <li>
            FreeBSD：腾讯云官方提供的 FreeBSD
            镜像默认不受该漏洞影响，请放心使用。
        </li>
    </ol>
    <p>&nbsp;</p>
    <h4>修复建议：</h4>
    <p>请参照上述【安全版本】升级您的 Linux 服务器内核，参考操作如下：</p>
    <p>
        <strong>推荐方案：</strong>【<span style="color: #ff0000"
            >CentOS 6/7 系列用户</span
        >】
    </p>
    <p>
        1）<strong>yum clean all &amp;&amp; yum makecache</strong
        >，进行软件源更新；
    </p>
    <p>
        2）<strong>yum update kernel&nbsp;&nbsp;-y</strong>，更新当前内核版本;
    </p>
    <p>3）<strong>reboot</strong>，更新后重启系统生效;</p>
    <p>
        4）<strong>uname -a</strong
        >，检查当前版本是否为上述【安全版本】，如果是，则说明修复成功。
    </p>
    <p>&nbsp;</p>
    <p>
        <strong>推荐方案：</strong>【<span style="color: #ff0000"
            >Ubuntu 16.04/18.04 LTS 系列用户</span
        >】
    </p>
    <p>
        1）<strong
            >sudo apt-get update &amp;&amp; sudo apt-get install
            linux-image-generic</strong
        >，进行软件源更新并安装最新内核版本；
    </p>
    <p>2）<strong>sudo reboot</strong>，更新后重启系统生效；</p>
    <p>
        3）<strong>uname -a</strong
        >，检查当前版本是否为【安全版本】，如果是，则说明修复成功。
    </p>
    <p>
        <a href="https://laod.cn/wp-content/uploads/2019/06/l1.jpg"
            ><noscript
                ><img
                    class="alignnone size-full wp-image-6151"
                    src="https://laod.cn/wp-content/uploads/2019/06/l1.jpg"
                    alt="Linux TCP"
                    width="1134"
                    height="678" /></noscript
            ><img
                class="alignnone size-full wp-image-6151 j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201134%20678'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2019/06/l1.jpg"
                alt="Linux TCP"
                width="1134"
                height="678"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone size-full wp-image-6151 j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2019/06/l1.jpg"
                    alt="Linux TCP"
                    width="1134"
                    height="678" /></noscript
        ></a>
    </p>
    <h4>临时缓解方案：</h4>
    <p>
        如用户不方便重启进行内核补丁更新，可选择如下方式禁用内核
        SACK配置防范漏洞利用（可能会对网络性能产生一定影响），运行如下命令即可：
    </p>
    <p>
        1）<strong
            >echo ‘net.ipv4.tcp_sack = 0’ &gt;&gt; /etc/sysctl.conf</strong
        >
        ，禁用 SACK 配置；
    </p>
    <p>2）<strong>sysctl -p</strong> ，重载配置，使其生效。</p>
    <div class="entry-copyright">
        <p>
            原创文章，作者：老D，如若转载，请注明出处：https://laod.cn/security/linux-tcp-sack-panic.html
        </p>
    </div>
</section>
