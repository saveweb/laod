<h1 id="title">华硕路由器修改 Hosts 以达到局域网内自定义解析</h1>
<time id="date" datetime="2019-03-20T12:13:55+08:00">2019-03-20 12:13</time>
<section id="content">
    <h4>针对情况</h4>
    <p>
        在路由器上设置了端口转发以及域名解析后，家里的 NAS
        可以很方便地从互联网访问到。但解析使用了家中网络的公网 IP
        地址，在一些使用环境不断变化的设备上（平板 / 笔记本）访问 NAS
        会变得更加麻烦，只有在相关设置中把 NAS 的网络地址设置为内网 IP
        才可以通过内网访问资源，否则访问会从互联网访问从而受到上传带宽的限制。解决这个问题的根本方法是让在家中访问
        NAS 域名时能解析到内网 IP，在台式机上可以很轻松地设置 Hosts
        文件，但才便携式设备中每次修改 Hosts 文件会很麻烦，并且在未越狱的 iOS
        设备上也很难自定义 Hosts，所以对解析的修改应该在路由器上进行。
    </p>
    <p>
        <a href="https://laod.cn/wp-content/uploads/2019/03/ASUS-hosts.jpg"
            ><noscript
                ><img
                    class="alignnone size-full wp-image-5939"
                    src="https://laod.cn/wp-content/uploads/2019/03/ASUS-hosts.jpg"
                    alt="华硕路由器"
                    width="780"
                    height="520" /></noscript
            ><img
                class="alignnone size-full wp-image-5939 j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20780%20520'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2019/03/ASUS-hosts.jpg"
                alt="华硕路由器"
                width="780"
                height="520"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone size-full wp-image-5939 j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2019/03/ASUS-hosts.jpg"
                    alt="华硕路由器"
                    width="780"
                    height="520" /></noscript
        ></a>
    </p>
    <h4>路由器配置</h4>
    <ul>
        <li>华硕 AC-86U</li>
        <li>刷入梅林固件</li>
        <li>启用 SSH / 安装 ShellinaBox 插件（Web SSH 插件）</li>
        <li>SSH 用户名密码和登陆路由器后台的帐号密码一致</li>
    </ul>
    <h4>Hosts 设置</h4>
    <p>
        一、在&nbsp;<strong>/jffs/&nbsp;</strong>目录下创建一个名为
        <strong>dnsmasq.conf.add</strong> 的文件，内容为
        <strong>addn-hosts=/jffs/configs/hosts</strong> 并且保存
    </p>
    <p>[code]vi /jffs/dnsmasq.conf.add[/code]</p>
    <p>
        二、进入该目录下的
        <strong>configs</strong>
        文件夹（<strong>/jffs/configs</strong>），创建一个名为
        <strong>hosts</strong>
        的文件，并且在该文件中设置自定义域名解析，并且保存。
    </p>
    <p>
        <span style="color: #ff0000"
            >如果习惯使用 router.asus.com
            访问路由器则必须在这里额外设置，否则只能使用 IP 地址访问。</span
        >
    </p>
    <p>
        [code]192.168.50.155 nas.laod.cn<br />192.168.50.1
        router.asus.com[/code]
    </p>
    <p>三、重启 DNS 服务</p>
    <p>自定义解析生效</p>
    <p>
        至此，在此路由器下的全部设备在访问相关域名时会首先使用路由器中 Hosts
        文件中的自定义设置
    </p>
    <div class="entry-copyright">
        <p>
            原创文章，作者：老D，如若转载，请注明出处：https://laod.cn/hosts/asus_router_edit_hosts.html
        </p>
    </div>
</section>
