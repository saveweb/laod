<h1 id="title">iPhone iPad等iOS 设备上配置修改 hosts 方法</h1>
<time id="date" datetime="2015-11-03T22:12:11+08:00">2015-11-03 22:12</time>
<section id="content">
    <h2>前提</h2>
    <p>iOS 设备指的是 iPhone/iPod touch/iPad 等运行 iOS 操作系统的移动设备。</p>
    <p>
        为了测试网页在这些移动设备上的表现，我们往往需要使用真实的设备去访问内网的开发/测试环境。在某些时候，服务器端严格绑定域名（不允许使用
        IP 地址访问），而且这个域名往往是虚拟的域名（比如<span
            style="color: #ff0000"
            >yoursite.dev</span
        >
        之类），我们就需要在移动设备上配置 hosts。
    </p>
    <p>
        最重要的一点，你的设备最好是已经越狱的。越狱的目的不是装盗版软件，是为了获取系统的最高权限，这样才有可能修改
        hosts 这样的系统级文件。（同理，在 Android 设备上修改 hosts 文件需要获取
        root 权限。）
    </p>
    <p>
        如果无法越狱（比如你手贱把系统升级到了最高版本），则可参考本文末尾的后备方案。
    </p>
    <h2>操作步骤</h2>
    <p>
        首先，我们需要安装最新版的 iTunes。因为它包含了 iOS
        设备的驱动程序，装了它，Windows 才能正常识别设备。
    </p>
    <p>
        然后，我们需要安装“同步助手”。暂不去纠结这个软件是不是盗版工具，它是目前最好用的
        iOS 设备的资源管理器，我们这里只需要用到它的文件管理的功能。
    </p>
    <p>
        <a
            href="https://laod.cn/wp-content/uploads/2015/11/tongbuzhushou-iPhone.png"
            ><noscript
                ><img
                    class="alignnone wp-image-1147 size-full"
                    title="同步助手"
                    src="https://laod.cn/wp-content/uploads/2015/11/tongbuzhushou.png"
                    alt="tongbuzhushou"
                    width="593"
                    height="340" /></noscript
            ><img
                class="alignnone wp-image-1147 size-full j-lazy"
                title="同步助手"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20593%20340'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2015/11/tongbuzhushou.png"
                alt="tongbuzhushou"
                width="593"
                height="340"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone wp-image-1147 size-full j-lazy"
                    title="同步助手"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2015/11/tongbuzhushou.png"
                    alt="tongbuzhushou"
                    width="593"
                    height="340" /></noscript
        ></a>
    </p>
    <p>
        进入文件管理界面，进入<span style="color: #ff0000">&nbsp;/etc</span
        >&nbsp;目录，可以找到&nbsp;<span style="color: #ff0000">hosts</span
        >&nbsp;文件。
    </p>
    <p>&nbsp;</p>
    <p>
        <a
            href="https://laod.cn/wp-content/uploads/2015/11/tongbuzhushou-iPhone.png"
            ><noscript
                ><img
                    class="alignnone wp-image-1146 size-full"
                    title="同步助手"
                    src="https://laod.cn/wp-content/uploads/2015/11/tongbuzhushou-iPhone.png"
                    alt="tongbuzhushou iPhone"
                    width="600"
                    height="460" /></noscript
            ><img
                class="alignnone wp-image-1146 size-full j-lazy"
                title="同步助手"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20600%20460'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2015/11/tongbuzhushou-iPhone.png"
                alt="tongbuzhushou iPhone"
                width="600"
                height="460"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone wp-image-1146 size-full j-lazy"
                    title="同步助手"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2015/11/tongbuzhushou-iPhone.png"
                    alt="tongbuzhushou iPhone"
                    width="600"
                    height="460" /></noscript
        ></a>
    </p>
    <p>
        把它拖到桌面，就可以为所欲为了。修改完成之后，再拖回去替换原文件即可。
    </p>
    <p>
        在修改过程中，唯一值得一提的恐怕就是换行符的格式了吧。本质上 iOS
        是一个功能完备的 UNIX 系统，它的文本文件的换行符当然使用 UNIX
        格式，与我们通常使用的 DOS/Windows
        格式不一样。安全起见，建议你在保存文件的时候，留意换行符的格式。（参见下图）
    </p>
    <p>
        <a href="https://laod.cn/wp-content/uploads/2015/11/UNIX.png"
            ><noscript
                ><img
                    class="alignnone size-full wp-image-1148"
                    src="https://laod.cn/wp-content/uploads/2015/11/UNIX.png"
                    alt="UNIX 格式"
                    width="581"
                    height="301" /></noscript
            ><img
                class="alignnone size-full wp-image-1148 j-lazy"
                src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20581%20301'%3E%3C/svg%3E"
                data-original="https://laod.cn/wp-content/uploads/2015/11/UNIX.png"
                alt="UNIX 格式"
                width="581"
                height="301"
                data-lazy-src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png" /><noscript
                ><img
                    class="alignnone size-full wp-image-1148 j-lazy"
                    src="https://laod.cn/wp-content/themes/justnews/themer/assets/images/lazy.png"
                    data-original="https://laod.cn/wp-content/uploads/2015/11/UNIX.png"
                    alt="UNIX 格式"
                    width="581"
                    height="301" /></noscript
        ></a>
    </p>
    <h2>后备方案</h2>
    <p>这里介绍两种后备方案，也适用于无法修改 hosts 的其它移动设备。</p>
    <h3>真实域名法</h3>
    <p>
        即注册一个真实的域名，解析到内网的开发/测试机。这实际上是一个变通的办法，它有一些显而易见的缺点：
    </p>
    <ul>
        <li>需要花钱买域名。</li>
        <li>可能需要更新服务器端的域名白名单——前端工程师往往没有这个权限。</li>
        <li>域名解析通过外网 DNS 实现，比起 hosts 本地解析要慢一些。</li>
    </ul>
    <h2>代理法</h2>
    <p>
        在本地开发机上建一个代理服务器，让 iOS
        设备通过代理服务器访问。这样域名解析这一步是在开发机完成的，只要把开发机的
        hosts 配置好就可以了。
    </p>
    <p>
        架设代理服务器并不复杂，有现成的方案，就是前端神器
        Fiddler（只需要选中“允许其它机器连接”选项就可以了），顺道还可以调试移动设备的
        HTTP 连接。iOS 设备端的配置也比较简单，这里就不赘述了。
    </p>
    <div class="entry-copyright">
        <p>
            原创文章，作者：老D，如若转载，请注明出处：https://laod.cn/hosts/iphone-ipad-ios-hosts.html
        </p>
    </div>
</section>
